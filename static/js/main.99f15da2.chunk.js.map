{"version":3,"sources":["api.ts","PersonName.tsx","Person.tsx","PeopleTable.tsx","App.tsx","index.tsx"],"names":["getData","a","fetch","then","response","json","people","map","person","index","id","father","fatherName","mother","motherName","born","died","age","sex","century","Math","ceil","slug","PersonName","className","cn","name","Person","PeopleTable","searchParams","history","useHistory","useParams","sortBy","get","useState","sortedPeople","setSortedPeople","useEffect","useMemo","sort","b","localeCompare","table","onClick","set","reverse","toLowerCase","push","search","toString","clickHandler","key","toUpperCase","e","pathname","App","setPeople","location","useLocation","URLSearchParams","currentQuery","setCurrentQuery","data","updateQuery","useCallback","debounce","value","visiblePeople","filter","includes","to","exact","type","placeholder","onChange","target","trim","delete","path","render","from","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.99f15da2.chunk.js","sourcesContent":["const getPeople = () => {\n  return fetch('https://mate-academy.github.io/react_people-table/api/people.json')\n    .then(response => response.json());\n};\n\nexport const getData = async (): Promise<PeopleTable[]> => {\n  const people = await getPeople();\n\n\n  return people.map((person: PeopleTable, index: number) => ({\n    ...person,\n    id: index + 1,\n    father: person.fatherName ? person.fatherName : 'unknown',\n    mother: person.motherName ? person.motherName : 'unknown',\n    born: person.born,\n    died: person.died,\n    age: person.died - person.born,\n    sex: person.sex,\n    century: Math.ceil(person.died / 100),\n    slug: person.slug,\n  }));\n};\n","import React from 'react';\nimport cn from 'classnames';\n\n\ntype Props = {\n  person: PeopleTable;\n};\nexport const PersonName: React.FC<Props> = ({ person }) => {\n  return (\n    <td\n      className={cn({\n        'Person--male': person.sex === 'm',\n        'Person--female': person.sex === 'f',\n      })}\n    >\n        {person.name}\n    </td>\n  );\n};\n","import React from 'react';\nimport cn from 'classnames';\nimport { PersonName } from './PersonName';\n\ntype Props = {\n  person: PeopleTable;\n};\n\nexport const Person: React.FC<Props> = ({ person }) => {\n\n  return (\n    <>\n      <td>{person.id}</td>\n      <PersonName person={person} />\n      <td>{person.sex}</td>\n      <td>{person.born}</td>\n      <td>{person.died}</td>\n      <td>{person.age}</td>\n      <td className={\n        cn({\n          'Person--male': person.sex === 'm',\n        })\n      }\n      >\n          {person.father}\n      </td>\n      <td className={\n        cn({\n          'Person--female': person.sex === 'f',\n        })\n      }\n      >\n          {person.mother}\n      </td>\n      <td>{person.century}</td>\n    </>\n  );\n};\n","import React, {\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\nimport {\n  useHistory,\n  useParams,\n} from 'react-router-dom';\nimport cn from 'classnames';\nimport { Person } from './Person';\n\ntype Props = {\n  people: PeopleTable[];\n  searchParams: any;\n};\n\nexport const PeopleTable: React.FC<Props> = ({ people, searchParams }) => {\n  const tableHead = ['id', 'name', 'sex', 'born', 'died', 'age', 'father', 'mother', 'century'];\n  const history = useHistory();\n  const { name } = useParams();\n  const sortBy: string = searchParams.get('sortBy');\n  const [sortedPeople, setSortedPeople] = useState<PeopleTable[]>([...people]);\n\n  useEffect(() => {\n    setSortedPeople([...people]);\n  }, [people]);\n\n  useMemo(() => {\n    switch (sortBy) {\n      case 'id':\n      case 'died':\n      case 'born':\n      case 'age':\n      case 'century':\n       sortedPeople.sort((a, b) => (a[sortBy] - b[sortBy]));\n        break;\n      case 'name':\n      case 'sex':\n      case 'father':\n      case 'mother':\n        sortedPeople.sort((a, b) => (a[sortBy].localeCompare(b[sortBy])));\n        break;\n      default:\n        break;\n    }\n  }, [sortedPeople, sortBy]);\n\n  const clickHandler = (table: string) => {\n    if (searchParams.get('sortBy') === table\n      && searchParams.get('sortOrder') === 'asc') {\n      searchParams.set('sortOrder', 'desc');\n      sortedPeople.reverse();\n    } else {\n      searchParams.set('sortOrder', 'asc');\n      sortedPeople.reverse();\n    }\n\n    searchParams.set('sortBy', table.toLowerCase());\n\n    history.push({\n      search: searchParams.toString(),\n    });\n  };\n\n  const handleChangePath = (e: string) => {\n    history.push({\n      pathname: `/people/${e}`,\n      search: searchParams.toString(),\n    });\n  };\n\n  return (\n    <>\n      <table className=\"PeopleTable\">\n        <thead>\n          <tr\n            className=\"PeopleTable-head\"\n          >\n            {\n              tableHead.map(table => (\n                <th\n                  onClick={() => clickHandler(table)}\n                  key={table}\n                  className=\"PeopleTable--tabs\"\n                >\n                  {table.toUpperCase()}\n                  {sortBy === table && '*'}\n                </th>\n              ))\n            }\n          </tr>\n        </thead>\n        <tbody>\n          {sortedPeople.map((person) => (\n            <tr\n              key={person.id}\n              className={cn('Person', {\n                'Person--active': person.slug === name,\n              })}\n              onClick={() => handleChangePath(person.slug)}\n            >\n              <Person person={person} />\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </>\n  );\n};\n","import React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useState\n} from 'react';\nimport {\n  NavLink,\n  Switch,\n  Route,\n  Redirect,\n  useHistory,\n  useLocation,\n} from 'react-router-dom';\nimport { getData } from './api';\nimport './App.css';\nimport { PeopleTable } from './PeopleTable';\nimport debounce from 'lodash/debounce';\n\nconst App = () => {\n  const [people, setPeople] = useState<PeopleTable[]>([]);\n\n  const history = useHistory();\n  const location = useLocation();\n  const searchParams = new URLSearchParams(location.search);\n  const search = searchParams.get('query') || '';\n  const [currentQuery, setCurrentQuery] = useState(search)\n\n  useEffect(() => {\n    getData().then((data) => {\n      setPeople(data);\n    });\n  }, []);\n\n const updateQuery = useCallback(\n   debounce((value: string) => {\n     history.push({ search: value });\n   }, 500),\n   [],\n );\n\n    const visiblePeople = useMemo(() => {\n    return people.filter(person => (\n      (person.name + person.father + person.mother).toLowerCase().includes(search.toLowerCase())\n    ));\n  }, [people, search]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const {value} = e.target;\n    setCurrentQuery(value)\n    searchParams.set('query', value);\n\n    if (!(searchParams.get('query') || '').trim()) {\n      searchParams.delete('query');\n    }\n\n    updateQuery(searchParams.toString());\n  }\n\n  useEffect(() => {\n    setCurrentQuery(search);\n  }, [search]);\n\n  return (\n    <div className=\"App\">\n      <header>\n        <ul>\n          <li className=\"header--item\">\n            <NavLink to=\"/\" exact className=\"header--link\">HOME</NavLink>\n          </li>\n          <li className=\"header--item\">\n            <NavLink to=\"/people\" className=\"header--link\">PEOPLE</NavLink>\n          </li>\n        </ul>\n        <input\n          type=\"text\"\n          value={currentQuery}\n          placeholder=\"Type to search people\"\n          onChange={handleChange}\n        />\n        <h1 className=\"header--head\">People table</h1>\n      </header>\n\n      <Switch>\n        <Route path=\"/\" exact>\n          <h2 className=\"head--home-page\">HomePage</h2>\n        </Route>\n        <Route\n          path=\"/people/:name?\"\n          render={() => (\n            <PeopleTable\n              people={visiblePeople}\n              searchParams={searchParams}\n            />\n          )}\n        />\n        <Redirect from=\"/home\" to=\"/\" />\n        <Route>\n          <h1>Page not found</h1>\n        </Route>\n      </Switch>\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { HashRouter } from 'react-router-dom';\nimport App from './App';\n\nReactDOM.render(\n  <HashRouter>\n    <App />\n  </HashRouter>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}